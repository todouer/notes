## 1、至亲密友

2个人远距离交流，可以通过手电筒开和关进行通信，但想表达的文字太复杂，手电筒开关次数太多，难度非常大。

引出**莫尔斯电码**，使用点和划（短闪和长闪）通信。

结论：

- 编码是用来在机器和人之间信息传递的方式，编码就是交流。
- 编码无处不在，手电筒的闪烁，英语词汇，空气中的比划，手语，布莱叶盲文。
- 计算机里存储和传递数字、声音、音乐、图片和电影，处理后呈现出信息与人类沟通。

## 2、编码与组合

莫尔斯码发送简单，但是接收后解析困难，解决方案：**构建信息与编码的图表**。

结论：

- **码字的数目 = 2^编码位数**
- 编码进行适合的组合，得出完整的信息表示。

## 3、布莱叶盲文与二进制码

布莱叶觉得最初的盲文编码过于复杂，不利于长文本阅读，随之改造盲文编码，使用2*3的矩阵，利用凸/平点表示一个字母信息。此标准沿用至今，改造后有了二级布莱叶盲文（使用很多缩写,一个2*3矩阵表示一个单词）

结论：**使用6位二进制码表示出2^6=64种编码表示，并且根据上下文有双重身份。**

## 4、手电筒的剖析

**原子构成：中子、质子、电子。**

一个原子的中电子数=质子数，如果电子从原子中脱离，就会产生**电流**。

当质子与电子出现失衡，就会自我修复，从其他物体带走电子，例如地毯带走脚上的电子，自己感觉被静电电到了。

电路中的电子不断从一个原子移动到下一个原子，就形成了**电流**。

电池内部经过化学反应，能够使多余的自由电子聚集到负极(阴极)，正极(阳极)变得急需电子，**化学能转为电能**。

电池为电路提供电能，反过来，电路为电池内化学反应提供条件，化学反应持续进行，化学物质被消耗完，电池没电。

导体：最外层电子容易逃逸。绝缘体：阻抗性很大(电阻)。

交代出：电流、电压、电阻、功率。

白炽灯发光原理：**钨丝电阻非常小，电流经过后钨丝变热达到燃点，由于存在真空中，不会燃烧，所以发亮！**

## 5、绕过拐角的通信

远距离如何通信？通过电源+导线的方式，实现远距离通信。

距离越远，需要的导线越长，成本高并且电阻大，需要强电压。

如果电压足够强，电池足够大，通信2方只需要一端接地，另一端使用一根导线即可，减少成本。

结论：**使用导线可以构建出绕过拐角、视线之外的发报系统，不受距离限制，涉及问题：电流、电阻等。**

## 6、电报机与继电器

早期提高远距离通信速度方式：人站在高山上，作为中继系统挥旗发出旗语，或通过机械臂装置代替人工。

电报机原理：**在线路一端采取一些措施，使线路另一端发生某种变化。**

电池+导线缠绕铁棒，电流通过后，铁棒具有磁性。**电磁铁是电报机的基础。**

电报机构成：

- 发送端：一个开关，敲击使其上下移动，产生点、划莫尔斯码
- 接收端：一块电磁铁拉动一根金属杆构成，发送端电键按下，电磁铁拉动金属杆下降，松开电键，弹回原来位置，接收点、划信息。

中继器由来：距离太远产生的问题：电压有限，距离越长，电阻增大，需中间设备传送信息。

**中继器其实就是在接收端再增加一个类似发送端的设备，可以同步发送端的信息，发送给下个接收端，以此循环，放大“信号”。**

## 7、我们的十个数字

人的数字世界：十个数字，因为有十只手指。

罗马数字：I、V、X、L等，缺点乘除复杂。

阿拉伯数字：计算简单，分解计算。

## 8、十的替代品

手指、卡通人物、龙虾、海豚的数字世界：10、4、2、1。

数字可以有十进制、八进制、二进制表示。

二进制只有0、1，可以代表开关、电流是否通过、灯泡是否发亮。

**二进制与计算机有紧密联系。**

## 9、二进制数

二进制每一位，被称为比特位(bit)。

**编码数量 = 2^比特位**

UPC(商品统一代码,条形码)是95位的二进制码，包含左护线、数字、中护线、数字、右护线。

UPC下一串数字就是二进制码通过一定规则编码转换后的数字(分类,ID,校验码)。

**结论：比特可以表示文字、图片、声音、电影，也可以表示产品编码、胶片速度等。用比特表示信息所要做的就是计算有多少种可能性罢了。**

## 10、逻辑与开关

在解决问题时，可以把文字语言转换为数学语言，根据数学公式可推导计算问题结果。

在布尔代数中，操作数不是数字而是类，一个类就是一个事物的的群体(集合)。

布尔代数中，类的计算使用**交集、并集**计算，**1表示全集，0表示空集**。

矛盾律：一个事物既不可能是它本身同时又是它的对立面。

交集、并集、全集去掉某些元素：可用**OR、AND、NOT**表示。

映射到电路中的表示：

- AND：串联
- OR：并联

电路中使用开关的原理，可以制造出电报机，从而可以演变制造出计算机。

## 11、门

通过串联或并联的开关组成继电器完成简单的逻辑任务，继电器的组合叫做**逻辑门**，逻辑门一般有**两个或多个输入**。

继电器的优点是：**可以被其他继电器控制，而不需要人工控制，意味着简单的逻辑门组合起来可以完成复杂的功能。**

如何连接继电器，是逻辑门的关键：

- 继电器串联：与门(AND)
- 继电器并联：或门(OR)
- 反向器：NOT
- 只有1-1输出0：或与门(NAND)
- 只有0-0输出1：或非门(NOR)
- 延迟信号：缓冲器

利用4个门与2个反向器连接的电路叫做**2-4译码器**：2个输入，输出4种不同的信号。

同样的原理可以制造出3-8译码器或4-16译码器。

**由缓冲器、反向器、四种基本逻辑门可以组成复杂电路。**

## 12、二进制加法器

一对二进制数相加的结果，有2个数位：**加法位、进位位**，这2个数位计算是分别进行的。

- **进位位逻辑：与门**
- **加法位逻辑：或门 + 与非门 = 异或门(XOR)**

2个输入 –> 异或门 –> 结果 –> 与门 = 半加器

2个半加器 + 或门 = 全加器

- 组成与门、或门、与非门(3 * 2 = 6个继电器)
- 异或门 + 与门 = 半加器(8个继电器)
- 2个半加器 + 或门 = 全加器(18个继电器)
- 8个全加器= 8位二进制加法器(144个继电器)

全加器的计算原理就是计算机的加法原理，但这种进位方式叫行**波进位(脉冲进位)**，更快的加法器使用**前置进位**提高运算速度。

现如今的计算机使用晶体管，耗能低、价格低、体积小，但如果搭建一个8位加法器依然需要144个晶体管，如果使用**前置进位**法，将用到更多的晶体管，但电路是体积非常小。

## 13、如何实现减法

十进制减法计算步骤：

- 减数大于被减数：**被减数 - 减数 = 减数位个9 - 减数 + 被减数 + 1 - 10^减数位数**
- 减数小于被减数：**被减数 - 减数 = -(减数位个9 - (减数位个9 - 减数 + 被减数))**

二进制减法计算步骤：

- 减数大于被减数：**被减数 - 减数 = 减数位个1 - 减数 + 被减数 + 1 - 2^减数位数**
- 减数小于被减数：**被减数 - 减数 = -(减数位个1 - (减数位个1 - 减数 + 被减数))**

8个异或门连接为**求补器**，**1个求补器+1个8位加法器+1个异或门形成可完成加法和减法的电路。**

**用2的补码来表示二进制中的负数，最高位代表符号位。**

## 14、反馈与触发器

2开关+电池+磁铁可以完成一个循环电路，如果连上金属簧片可以形成一个蜂鸣器，也可以叫**振荡器**。

振荡器可以在不需要人干涉的情况下，自发工作。

振荡器在0和1之间交替规律变化，又称为**时钟**。

振荡器从某个初始状态开始，经过一段时间又回到初始状态的间隔，称为**周期**。

周期的倒数就是振荡器的**频率**，也叫**赫兹**。

2个或非门+2个开关+1个灯泡的电路，左边或非门的输出是右边或非门的输入，而右边或非门的输出是左边或非门的输入，这种连接方式称之为**反馈**。

而当2个开关都断开时，电路有2个稳定态，这类电路统称为**触发器**。**触发器**可以“记住”某些信息，这类电路叫做**R-S(复位/置位)触发器**，这类触发器的特点在于：**可以记住哪个输入端最终状态为1**。

现在把2个输入分别叫做**数据端和保持位**，经过分析，保持位为0意味着输出不被数据端所影响，那么电路演变可以为：**增加2个与门**，变成3个输入：**复位、保持位、置位**，此时的电路和之前电路功能是相同的。

但是我们只想要2个输入，继续分析电路后得出：2个输入端同时为0是无意义的，而同时为1是非法的，因此只要将**保持位设置为0**，即可完成相同功能，电路演变为：**复位和置位变为1个数据端+反向器**代替，这样就有2个输入了：保持位+数据端。

此时的电路称为**电平触发的D型触发器**，即当保持位输入为某一特定电平，触发器保存数据端的输入。

通常情况下，保持位又叫做**时钟**，它可以在0和1之间规律来回变化，但此时的时钟仅用来指示什么时候保存数据。

至此，此电路就是电平触发的**D型锁存器**，也叫**1位存储器**，它可以锁存住1位数据并保持它，以便将来使用。

由2级R-S触发器连接的电路，时钟端既控制第一级R-S触发器，也控制着第二级，只有当时钟信号由0变为1时，数据端的输入才被保存下来，输出0到1或1到0，而下级触发器的频率正好是上级触发器频率的一半，这种电路叫**分频器**，就这样多个振荡器连接下去，就形成了**计数器**。

至此，我们可以通过使用继电器形成的电路来**加法、减法和计数**了。

## 15、字节与十六进制

**8位代表1个字节(byte)**，追溯历史原因，8位可以表示0-255共256种不同的事物，而最早的书面语言的基本字符都少于256个，所以使用8位表示1个字节是比较理想的手段，通用1个字节也可以表示RGB256种颜色值。

如果要表达的事物1个字节不够用，则可以扩展字节，采用2个字节甚至更多字节来表示，表示起来也很方便(扩展方便)。

把1个字节分为每4位为1组，进而演化出16进制，1个16进制位表示4位，表达起来也很方便。

## 16、存储器组织

把之前的**D型电平触发器**的时钟端、数据端分别改名为**写操作端，数据输入**，然后把多个这种1位锁存器连接起来，就形成了**多位锁存器**。

目前的电路，只能存储1个8位二进制数，如果想存储8个单独的比特怎么办？

使用8-1数据选择器，来控制哪个比特位存储。

目前输出端可以满足要求，控制每个比特位的单独存储。

但输入端包括了**数据输入和写操作信号**，要想合并这2个，只要一个输入端，使用**3-8译码器**即可完成合并。

译码器和选择器具有相同的选择信号，放在一起叫做**地址端口**。

通过3-8译码器的输入端，地址决定哪个锁存器可以被写操作端信号触发来保存数据，在输出端，8-1选择器来通过地址选择8个锁存器中的1个，最后输出。

至此，完成了一个可以存储8个单独比特的**随机存储器(RAM)**。

将多个RAM组织起来可以形成**RAM阵列**。

RAM阵列的**存储容量与地址输入端的数量**有直接联系，RAM阵列的存储容量=2^地址输入端的个数。

同理，使用RAM阵列就可以组织处1024*8的RAM，即1KB的RAM，其有**8个数据输入端、8个数据输出端和10个地址输入端(2^10=1024)**，地址输入端决定RAM的存储能力。

继续就能组织出64K*8的RAM，此RAM需要16个地址输入端，地址范围为0000h~FFFFh。

但是产生的另一个问题就是，组装出此电路的电路零件非常多，很难管理，如果使用一个**控制面板**来管理，就会简单的多。

控制面板上有16个开关用于控制地址位，8个开关控制输入的8比特数据，写操作端用1个开关，8个灯泡显示8位数据，最后还有个**控制开关**，控制是否来自其他电路的控制(其实就是CPU来控制)。

至此，我们制造出了64KB*8的RAM，能存储65536个8位数，并且此电路可以**接入其他电路，使其他电路来读、写存储器。**

**但是由于此RAM都是通过逻辑门和电路磁片组成的，所以断电后，将失去存储能力，这就是RAM断电后丢失数据的特点。**

## 17、自动操作

现在如果想计算多个数相加的结果，用1个8位加法器+1个8位锁存器就可以完成，但是有2个缺陷：

- 无法计算结果大于255的数
- 如果加数很多，输入的过程中一旦输入错误，则需重新输入

由于以上缺陷，可以连接之前的64k*8的RAM阵列，RAM的输入是一个16位数计数器(由之前的触发器组成)，RAM的输出连接加法器的输入，这样就可以把输入的数先保存到RAM中，每次输入都会通过计数器在RAM中寻址后保存，这样等全部输入完成后，就可以等待加法器依次相加得出结果。

这种电路只能上述说的第2个缺陷，但第1个缺陷还是无法解决，并且此电路启动后，无法停止。

上面所述的加法是，依次输入后，其先保存到RAM中，再输出给加法器，依次相加。

如果想计算50对数相加，产生50个结果，然后保存到RAM中，并且可以任意读取这50个结果，怎么做？

改造电路，使8位锁存器的输出连接到RAM的输入端，也就是说把计算后的值，再写回到RAM中保存，就可以达到目的。

目前解决问题需要如何配置一个自动加法器，不仅可以对一组数字做累加运算，还能自主确定累加了多少数字，并且能记住在RAM中存放了多少个计算结果？

经过分析，我们希望8位锁存器能做4件事：

- 把一个字节从RAM中加载到累加器(Load)
- 把RAM中的一个字节加到累加器中(Add)
- 把累加器的计算结果存放到RAM中(Store)
- 可以自动停止(Halt)

解决上述问题，需要引入另一个RAM，这个RAM来保存这些Load、Add、Store、Halt操作码，也就是说电路中有2个RAM共同工作，RAM1保存了数据，RAM2保存了代码(指令)。同时，要想达到8位锁存器Load指令的效果，需改造电路，8位加法器的输出与一个2-1选择器连接，2-1选择器连接RAM2和8位锁存器，这样锁存器就可以实现从RAM2中执行Load指令。

如果要实现减法如何做？有了之前由加法可以变相计算减法的逻辑，可以在RAM2和加法器之间连接一个反向器，就可以实现**减法操作**。

回到最开始提的问题，如何解决结果不能大于255的问题？解决办法是，把加数拆分，分别计算高字节和低字节的和，然后合并就可以得到结果。

这里又产生一个问题，如果低字节加法计算后，需要进位，这个进位需要与高字节累加才是正确结果，解决方法是：引入1个1位锁存器，叫它**进位锁存器**，同时引入一个**“进位加法”**的指令，专门保存进位的值，然后再和高字节累加计算。

同理，减法如何需要借位，添加一个“借位减法”的指令，此指令将减数取反，并把加法器的进位输入变为1。

**截止现在，此电路不限于计算8位数的加法运算，也可以计算16、24、32及以上位数的运算，包括加法和减法。**

但现在的电路有个问题，如果几个数相加，得到了结果，但是想再减去一个数，却做不到，不能复用之前的结果。

产生此问题的原因在于代码存储器和数据存储器是同步的、顺序的，代码存储器每一条指令对应数据存储器相同地址的存储单元。

解决此问题的方案是：每一个指令占据3个字节，第1个字节代表操作码，后2个字节存放1个16位存储器单元地址。

改造电路，把指令RAM阵列输出改为3个8位锁存器，第1个锁存器保存指令代码，后2个锁存器保存16位地址，输出给数据RAM阵列。

现在使用了3个字节存储指令和数据，那么就可以把2个RAM合为1个RAM。改造电路，去掉数据RAM，把2个8位锁存器的输出接入到2-1选择器然后连接RAM。

现在的电路虽然可以完成基本功能，但是还不够完美，因为现在的电路使用地址空间是要非常小心的，如果不注意，就会发生地址被覆盖的情况，导致执行错误。

要解决此问题的方法是：加入一个**跳转(jump)指令**，同时改造电路，使指令的后2个字节输出也可以输出到计数器，然后通过计数器来确定遇到跳转指令后，计数器输出需跳转的地址，完成跳转寻址。

如何完成2各数相乘的运算？那么就可以使用跳转指令完成，但是还是不够，这里需要一个跳转条件来配合，达到什么条件后才发生跳转。

增加1个锁存器，叫做**零锁存器**，只有当加法器的输出全部为0时它的值才是1。通过计数器和零锁存器的配合，就可以计算乘法运算。

当然同理，实现除法、平方根、取对数、三角函数运算也都是可行的。

**到这里，我们完成了一个计算机的核心功能，包括：处理器、存储器、输入设备、输出设备。这里的处理器即是CPU，主要负责控制和逻辑运算。**

**处理器包括若干组件，累加器就是其中一个非常重要的组件，它是一个锁存器，用来保存处理器内部的部分数据。**

在此电路设计中：

- 8位反向器和8位加法器构成了算数逻辑单元(ALU)，其只能进行算数运算(主要是加法和减法，在以后的计算机中可以进行逻辑运算)
- 16位计数器叫做程序计数器(PC)，其实就控制单元

我们设计的计算机由继电器、电线、开关、灯泡构成，这些都叫**硬件**，而存储器中的指令和数值叫做**软件**，平时我们所说的**“编写代码”**就是做软件的工作。

计算机处理的操作码(如Load、Add、Store)最终转换数字的其实叫做**机器码或机器语言**，这些操作码也叫做**助记符**，方便“编写”，但其本质还是转换为机器码。

用操作码和地址表示的程序，叫做**汇编**，它是机器语言和指令的文字描述的结合体，**使用汇编语言的好处在于降低了使用机器代码编写的错误率，同时易于理解。**
